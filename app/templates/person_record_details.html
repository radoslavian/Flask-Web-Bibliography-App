{% extends "base.html" %}
{% block styles %}
  {{ super() }}
  <style type="text/css">
    #table-responsibilities tr:hover { background-color: inherit; }
  </style>
{% endblock %}
{% block content %}
  <h6>Details for personal entry, id number
    {{ person_record.person_id }}:
  </h6>
  <h1>{{ person_record.last_name }}, {{ person_record.forenames }}
    {% if person_record.life_years %}
      ({{ person_record.life_years }})
    {% endif %}</h1>

    <table class="table table-hover col-md-6">
      {% if person_record.birth_date %}
	<tr>
	  <td>Exact birth date:</td>
	  <td>{{ person_record.birth_date }}</td>
	</tr>
      {% endif %}
      {% if person_record.death_date %}
	<tr>
	  <td>Exact death date:</td>
	  <td>{{ person_record.death_date }}</td>
	</tr>
      {% endif %}
      {% if person_record.note %}
      <tr>
	<td>Notes:</td>
	<td>{{ person_record.note }}</td>
      </tr>
      {% endif %}
      {% if person_record.name_variants.count() %}
	<tr>
	  <td data-toggle="tooltip" title="Pseudonyms, spelling variations etc.">
	    Name variants:
	  </td>
	  <td>
	    {{ macros.render_list(person_record.name_variants,
	    macros.render_person_name_variant) }}
	  </td>
	</tr>
      {% endif %}
      <tr>
	<td>
	  This person's responsibilities in documents:
	</td>
	<td>
	  {% if person_record.responsibilities_list %}
	    <table id="table-responsibilities" class="table-sm">
	      {% for (name, count) in person_record.responsibilities_list %}
		{# now get documents for which this person has each of these #}
		{# responsibilities #}
		<tr>
		  <td>{{ name.capitalize() }}</td>
		  <td><span class="badge badge-dark">documents:
		    {{ count }}</span></td>
		  {% endfor %}
		</tr>
	  </table>
	  {% endif %}
	</td>
      </tr>
      <tr>
	<td colspan="2">
	  <h5>Documents for which this person is a topic:
	    <span class="badge badge-dark">
	    &nbsp;{{ person_record.documents_topics.count() }}&nbsp;</span></h5>
	</td>
      </tr>
    </table>
  {% endblock %}
