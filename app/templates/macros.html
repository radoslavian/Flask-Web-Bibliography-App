{% macro pagination_widget(pagination, endpoint) %}
  {# Generates bootstrap pager for paginated sites. #}
  {# Reused (with changes) from: M. Grinberg, Flask..., p. 159-160 #}
  <ul class="pagination">
    <li class="page-item {% if not pagination.has_prev %} disabled{% endif %}">
      <a class="page-link"
	 href="{% if pagination.has_prev %}{{ url_for(endpoint,
	 page = pagination.page - 1, **kwargs) }}{% else %}#{% endif %}">
	 &laquo;
      </a>
    </li>
    {% for p in pagination.iter_pages() %}
      {% if p %}
	{% if p == pagination.page %}
	  <li class="page-item active">
	    <a class="page-link"
	       href="{{ url_for(endpoint, page = p, **kwargs) }}">{{ p }}</a>
	  </li>
	{% else %}
	  <li>
	    <a class="page-link"
	       href="{{ url_for(endpoint, page = p, **kwargs) }}">{{ p }}</a>
	  </li>
	{% endif %}
      {% else %}
  <li class="page-item disabled"><a href="#">&hellip;</a></li>
{% endif %}
{% endfor %}
<li class="page-item{% if not pagination.has_next %} disabled{% endif %}">
  <a class="page-link" href="{% if pagination.has_next %}{{ url_for(endpoint,
	   page = pagination.page + 1, **kwargs) }}{% else %}#{% endif %}">
	   &raquo;
  </a>
</li>
</ul>
{% endmacro %}


{% macro render_list(items, item_fn) %}
  {# Renders list of items (people, geographic location) #}
  {# using funtion creating individual item. #}
  <ul class="items-list list-group">
    {% for item in items %}
      <li class="list-group-item">{{ item_fn(item) }}</li>
    {% endfor %}
  </ul>
{% endmacro %}


{% macro render_collective_body(col_body) %}
  {# Prints collective body name and hyperlink for a detailed view. #}
  <a href="{{ url_for('.collective_body_details',
	   c_body_id=col_body.id) }}">
	   {{ col_body.name }}
  </a>
{% endmacro %}


{% macro render_collective_body_responsibility(col_body) %}
  {# Prints collective body (name) and it's responsibility in #}
  {# a document template. #}
  <strong>
    {{ render_responsibility(col_body.responsibility) }}:
  </strong>
  <br>
  {{ render_collective_body(col_body.collectivity) }}
{% endmacro %}


{% macro render_person(person) %}
  {# Prints person's name and hyperlink for a detailed view. #}
  <a href="{{ url_for('.person_details', person_id=person.person_id) }}">
    <em>{{ person.last_name }}</em>, {{ person.forenames }}
  {% if person.life_years %} ({{ person.life_years }}) {% endif %}</a>
{% endmacro %}


{% macro render_person_name_variant(variant) %}
  {{ variant.last_name_variant }},
  {{ variant.first_name_variant }}&nbsp;
  <a href="{{ url_for('.name_variant',
	   variant_id=variant.variant_id) }}">details&nbsp;&hellip;</a>
{% endmacro %}


{% macro render_responsibility(responsibility) %}
  {# add url #}
  <strong>{{ responsibility.responsibility_name.capitalize() }}</strong>
{% endmacro %}


{% macro render_person_responsibility(person_responsibility) %}
  {{ render_responsibility(
  person_responsibility.responsibility) }}:<br>
  {{ render_person(person_responsibility.person) }}
{% endmacro %}


{% macro render_location(location) %}
  <a href="{{ url_for('.geographic_location_details',
	   location_id=location.location_id) }}">
    <strong>{{ location.name }}</strong>
    {% if location.determiner %}
      ({{ location.determiner }})
    {% endif %}
  </a>
{% endmacro %}


{% macro render_language(language) %}
  {# add hyperlink #}
  {{ language.language_name }}
  {% if language.iso_639_1_language_code %}
    ({{ language.iso_639_1_language_code }})
  {% elif language.iso_639_2_language_code %}
    ({{ language.iso_639_2_language_code }})
  {% endif %}
{% endmacro %}


{% macro render_keyword(kw) %}
  <a href="{{ url_for('.keyword_details', keyword_id=kw.id) }}">
    {{ kw.keyword }} {% if kw.determiner %} ({{ kw.determiner }}) {% endif %}
  </a>
{% endmacro %}


{% macro responsibilities_list(_list) %}
  {# List of (person, collective body) responsibilities #}
  {# with number of attached documents (printed from the tuple).#}
  <table class="table-sm responsibilities">
    {% for (name, count) in _list %}
      <tr>
	<td>{{ name.capitalize() }}</td>
	<td><span class="badge badge-dark">
	    documents:
	    {{ count }}
	</span></td>
      </tr>
    {% endfor %}
  </table>
{% endmacro %}


{% macro see_documents_list_badge(documents_relationship,
  pre_title=None, post_title="&nbsp;-&nbsp;see&nbsp;list") %}
  <span class="badge badge-dark">
    {% if pre_title %}
      {{ pre_title|safe }}
    {% endif %}
    {{ documents_relationship.count() }}
    {% if post_title %}
      {{ post_title|safe }}
    {% endif %}
  </span>
{% endmacro %}
